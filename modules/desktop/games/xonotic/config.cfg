// mrtnvgr's Xonotic

// === Master reset ===
cvar_resettodefaults_all
_termsofservice_accepted 1
// TODO: turn off "Welcome to Xonotic" menu

// TODO:
// r_ambient 0-127 brighten map
// r_colormap_palette?????
// r_viewscale crusher :0

// === Utils ===
// set bx_if_var_ ""
// alias bx_if "bx_if_var_ ${1}; toggle bx_if_var_; alias bx_if_action0_ ${2-}; alias bx_if_action1_ bx_noop; bx_if_do_"
// alias bx_if_do_ "bx_if_action${bx_if_var_}_"
// alias bx_noop ""

// =============
alias _set_name name ":)"
defer 10.0 _set_name // Wait for 5 second name change cooldown
// =============

// =============
fov 110
sensitivity 4
m_accelerate 0
// =============

// === Video ===
vid_width 1920
vid_height 1080
cl_minfps 60
cl_maxfps 120
vid_refreshrate 60
// =============

playermodel "models/player/megaerebus.iqm"
cl_forceplayermodels 1

set mr_color 3
color ${mr_color}
cl_forceplayercolors 1

// === Crosshair ===
crosshair_enabled 1
crosshair 32
crosshair_alpha 1
crosshair_color "0.19 1 1" // "0.19 1 0.55"
crosshair_color_special 0
crosshair_dot 1
crosshair_dot_color_custom 0
crosshair_dot_size 0.5
crosshair_hitindication 0
crosshair_hittest 0
crosshair_hittest_blur_wall 0
crosshair_per_weapon 0
crosshair_pickup 0
crosshair_ring_reload_size 1
crosshair_ring_size 0.75
crosshair_size 0.5

// === Solid textures (togglable) ===
// TODO: rather than keeping default values, can I reset?
// TODO: use exec effects_low.cfg
alias mr_solidtex "_mr_solid_on"
alias _mr_solid_on  "gl_picmip_world 32; gl_picmip_other 6; cl_playerdetailreduction 10; alias mr_solidtex _mr_solid_off; vid_restart"
alias _mr_solid_off "gl_picmip_world 0;  gl_picmip_other 0; cl_playerdetailreduction 0;  alias mr_solidtex _mr_solid_on;  vid_restart"
mr_solidtex

// === Color blinker ===
set mr_blinker_color1 4
set mr_blinker_color2 5
set mr_blinker_speed 1

alias __first_color  "color ${mr_blinker_color1}; alias mr_blinker_start __second_color; defer ${mr_blinker_speed} mr_blinker_start"
alias __second_color "color ${mr_blinker_color2}; alias mr_blinker_start __first_color;  defer ${mr_blinker_speed} mr_blinker_start"
alias mr_blinker_start "__first_color"

alias mr_blinker_stop "defer clear"

alias _mr_toggle_blinker_on "mr_blinker_start;                    alias _mr_toggle_blinker _mr_toggle_blinker_off"
alias _mr_toggle_blinker_off "mr_blinker_stop; color ${mr_color}; alias _mr_toggle_blinker _mr_toggle_blinker_on"
alias _mr_toggle_blinker "_mr_toggle_blinker_on"
bind ctrl "_mr_toggle_blinker"

// === SOUND ===
bgmvolume 0
snd_staticvolume 0
snd_channel1volume 0.1 // Weapons
snd_channel6volume 0   // Pain
snd_channel3volume 0.1 // Items
con_chatsound 0
cl_announcer "disable"

// === Clear vision ===
hud_damage 0
hud_dynamic_shake 0
hud_contents 0
cl_particles_alpha 0.2
cl_particles_sparks 0
cl_particles_blood 0
cl_particles_smoke 0
cl_particles_rain 0
r_coronas 0
r_bloom 0
// cl_bobfall 0
// cl_bobmodel 0
// cl_bobup 0
r_drawfog 0
// Turn off zoom overlays
cl_reticle 0
// Instant zooming
cl_zoomspeed -1

// === Disable gore ===
cl_nogibs 1
cl_gentle 1

// === 2D items ===
cl_simple_items 1

// === Disable weapon auto-swap ===
// TODO: enable autoswitching and set cl_weaponpriority
cl_autoswitch 0

// === Turn off hud animations ===
hud_panel_scoreboard_fadeinspeed 0
hud_panel_scoreboard_fadeoutspeed 0

// === Black dead bodies ===
cl_deathglow 0.01
cl_deathglow_min 0.01

// TODO: auto respawn after death

// === Disable player statistics ===
cl_allow_uid2name 0
cl_allow_uidtracking 0
cl_allow_uidranking 0

// === Disable spawn zoom ===
cl_spawnzoom 0

// === Disable auto-screenshots ===
cl_autoscreenshot 0

// === Disable menu watermark ===
menu_watermark 1

// === Hide empty servers ===
menu_slist_showempty 0

// === Show fps, time, date in HUD ===
showfps  1
showtime 1
showdate 1
showdate_format "%d.%m.%Y"

// === Capture demos ===
cl_autodemo 1
sv_autodemo_perclient 1

// TODO: music stuff and sounds (hehe) from here https://github.com/HumanoidSandvichDispenser/xonotic-config

// === AVOID THESE ===

// EXTREME LAG :( (3x perf degrade)
// TODO: can be solved?
// r_celoutlines 1; r_shadow_deferred 1

// Lighten map up, looks bad
// r_fullbright 1
// r_fullbright_directed 1 // Lightens up even more
